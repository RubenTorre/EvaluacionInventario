<div class="min-h-screen flex flex-col bg-gray-100 p-6">
  <div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-800">
      {{ isEditMode ? 'Editar Producto' : 'Crear Producto' }}
    </h1>
    <p class="text-gray-600">
      Por favor completa todos los campos para {{ isEditMode ? 'editar el producto' : 'crear un nuevo producto' }}.
    </p>
  </div>

  <form class="flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 bg-white p-8 rounded-lg shadow overflow-auto">
    
    <div class="flex flex-col">
      <label class="mb-1 font-semibold text-gray-700">Nombre del Producto</label>
      <input type="text" [(ngModel)]="product.name" name="name" placeholder="Ej: Camiseta"
             class="p-3 border rounded w-full">
    </div>

    <div class="flex flex-col">
      <label class="mb-1 font-semibold text-gray-700">Categoría</label>
      <input type="text" [(ngModel)]="product.category" name="category" placeholder="Ej: Ropa"
             class="p-3 border rounded w-full">
    </div>

    <div class="flex flex-col md:col-span-2">
      <label class="mb-1 font-semibold text-gray-700">Descripción</label>
      <textarea [(ngModel)]="product.description" name="description" placeholder="Descripción del producto"
                class="p-3 border rounded w-full" rows="4"></textarea>
    </div>

    <div class="flex flex-col">
      <label class="mb-1 font-semibold text-gray-700">Subir Imagen</label>
      <input #fileInput type="file" (change)="onFileSelected($event)" class="p-2 border rounded w-full" aria-label="subir imagen">

      <div *ngIf="imagePreview || product.imageUrl" class="relative w-24 h-24 mt-2">
        <img [src]="imagePreview ? imagePreview : 'https://localhost:7195/' + product.imageUrl"
             alt="Imagen del producto"
             class="w-24 h-24 object-cover rounded">
        <button type="button"
                (click)="removeImage()"
                class="absolute top-0 right-0 bg-red-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm hover:bg-red-600">
          &times;
        </button>
      </div>
    </div>

    <div class="flex flex-col">
      <label class="mb-1 font-semibold text-gray-700">Precio</label>
      <input type="number" [(ngModel)]="product.price" name="price" placeholder="Ej: 100"
             class="p-3 border rounded w-full">
    </div>

    <div class="flex flex-col">
      <label class="mb-1 font-semibold text-gray-700">Stock Disponible</label>
      <input type="number" [(ngModel)]="product.stock" name="stock" placeholder="Ej: 50"
             class="p-3 border rounded w-full">
    </div>

    <div class="flex justify-end md:col-span-2 gap-4 mt-4">
      <button type="button" (click)="saveProduct()"
              class="bg-blue-500 text-white px-6 py-3 rounded hover:bg-blue-600">
        Guardar
      </button>
      <button type="button" class="bg-gray-300 px-6 py-3 rounded hover:bg-gray-400" routerLink="/products">
        Cancelar
      </button>
    </div>
  </form>
</div>
